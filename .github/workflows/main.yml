name: 提取 iOS 26.2 开发者镜像
on:
  workflow_dispatch:  # 手动触发，按需运行

jobs:
  fetch-ios-mirror:
    runs-on: macos-15  # 直接使用官方 macOS 15 运行器（预装 Xcode 26.x）
    steps:
      - name: 切换 Xcode 到 26.2 版本
        run: sudo xcode-select -s /Applications/Xcode_26.2.app/Contents/Developer
      
      - name: 复制 iOS 26.2 开发者镜像
        run: |
          # 创建输出目录
          mkdir -p ~/ios-26.2-mirror
          # 复制镜像和签名文件（官方路径，确保能找到）
          cp /Applications/Xcode_26.2.app/Contents/Developer/Platforms/iPhoneOS.platform/DeviceSupport/26.2/DeveloperDiskImage.dmg ~/ios-26.2-mirror/
          cp /Applications/Xcode_26.2.app/Contents/Developer/Platforms/iPhoneOS.platform/DeviceSupport/26.2/DeveloperDiskImage.dmg.signature ~/ios-26.2-mirror/
      
      - name: 上传镜像供下载
        uses: actions/upload-artifact@v4
        with:
          name: ios-26.2-developer-mirror
          path: ~/ios-26.2-mirror/  # 上传后可直接下载
